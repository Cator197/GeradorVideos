{% extends "base.html" %}

{% block content %}
<div class="complete-container">
  <form id="form_generate_montagem">
    <div class="row-imagens">
      <!-- Resumo das Cenas -->
      <div class="col-list">
        <label for="montagem_list"><strong>Resumo das Cenas</strong></label>
        <select id="montagem_list" name="montagem_list" multiple size="10" class="form-control">
          {% for cena in cenas %}
            <option value="{{ loop.index0 }}">
              Cena {{ loop.index }} – {{ cena.narracao[:60] if cena.narracao else '[sem texto]' }}
            </option>
          {% endfor %}
        </select>
      </div>

      <!-- Painel de Configurações -->
      <div class="col-config config-panel">
        <fieldset>
          <legend><strong>Configurações</strong></legend>

          <div class="form-group">
            <label><input type="radio" name="scope" value="all" checked> Todas</label>
          </div>
          <div class="form-group">
            <label><input type="radio" name="scope" value="single"> Somente a</label>
            <input type="number" name="single_index" id="single_index" min="1" placeholder="nº"
                   class="form-control small-input" disabled>
          </div>
          <div class="form-group">
            <label><input type="radio" name="scope" value="from"> A partir da</label>
            <input type="number" name="from_index" id="from_index" min="1" placeholder="nº"
                   class="form-control small-input" disabled>
          </div>

          <div class="form-group">
            <label for="tipo">Tipo:</label>
            <select id="tipo" name="tipo" class="form-control">
              <option value="hard">Hard</option>
              <option value="soft">Soft</option>
            </select>
          </div>

          <div class="form-group">
            <label for="cor">Cor:</label>
            <select id="cor" name="cor" class="form-control">
              <option value="white">Branco</option>
              <option value="black">Preto</option>
              <option value="yellow">Amarelo</option>
              <option value="red">Vermelho</option>
              <option value="green">Verde</option>
              <option value="blue">Azul</option>
            </select>
          </div>

          <div class="form-group">
            <label for="tamanho">Tamanho da fonte:</label>
            <input type="number" id="tamanho" name="tamanho" min="10" max="100" value="32" class="form-control">
          </div>

          <div class="form-group">
            <label for="posicao">Posição:</label>
            <select id="posicao" name="posicao" class="form-control">
              <option value="bottom">Inferior</option>
              <option value="top">Superior</option>
              <option value="center">Centro</option>
            </select>
          </div>

          <button id="generate_montagem" type="button" class="btn-primary">Gerar</button>
        </fieldset>
      </div>
    </div>

    <!-- Barra de Progresso -->
    <div class="progress-bar">
      <div class="progress-fill" id="progress_fill"></div>
    </div>

    <!-- Log de Progresso -->
    <div class="progress-log">
      <pre id="log"></pre>
    </div>
  </form>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/generate_montagem.js') }}"></script>
{% endblock %}
