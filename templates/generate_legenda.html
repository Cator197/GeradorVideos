{% extends "base.html" %}

{% block content %}
<div class="complete-container">
  <form id="form_generate_legendas">
    <div class="row-imagens">
      <!-- Resumo das Narrações -->
      <div class="col-list">
        <label for="legenda_list"><strong>Resumo das Narrações</strong></label>
        <select id="legenda_list" name="legenda_list" multiple size="10" class="form-control">
          {% for cena in cenas %}
            <option value="{{ loop.index0 }}">
              Narração {{ loop.index }} – {{ cena.narracao[:60] if cena.narracao else '[sem texto]' }}
            </option>
          {% endfor %}
        </select>
      </div>

      <!-- Painel de Configurações -->
      <div class="col-config config-panel">
        <fieldset>
          <legend><strong>Configurações</strong></legend>
          <div class="form-group">
            <label><input type="radio" name="scope" value="all" checked> Todas</label>
          </div>
          <div class="form-group">
            <label><input type="radio" name="scope" value="single"> Somente a</label>
            <input type="number" name="single_index" id="single_index" min="1" placeholder="nº"
                   class="form-control small-input" disabled>
          </div>
          <div class="form-group">
            <label><input type="radio" name="scope" value="from"> A partir da</label>
            <input type="number" name="from_index" id="from_index" min="1" placeholder="nº"
                   class="form-control small-input" disabled>
          </div>
          <button id="generate_legendas" type="button" class="btn-primary">Gerar</button>
        </fieldset>
      </div>
    </div>

    <!-- Barra de Progresso -->
    <div class="progress-bar">
      <div class="progress-fill" id="progress_fill"></div>
    </div>

    <!-- Log de Progresso -->
    <div class="progress-log">
      <pre id="log"></pre>
    </div>
  </form>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/generate_legenda.js') }}"></script>
{% endblock %}
